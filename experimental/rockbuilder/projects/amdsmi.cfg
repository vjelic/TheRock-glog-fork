[project_info]
name=amdsmi
version=rocm-6.4.1
repo_url=https://github.com/ROCm/amdsmi

skip_windows=YES

env_common=
       ROCM_PATH=${ROCM_HOME}
       CMAKE_PREFIX_PATH=${ROCM_HOME}
       HIP_CLANG_PATH=${ROCM_HOME}/lib/llvm/bin
       DEVICE_LIB_PATH=${ROCM_HOME}/lib/llvm/amdgcn/bitcode
       HIP_DEVICE_LIB_PATH=${DEVICE_LIB_PATH}

env_linux =
       CMAKE_C_COMPILER=${ROCM_HOME}/bin/hipcc
       CMAKE_CXX_COMPILER=${ROCM_HOME}/bin/hipcc
       CC=${CMAKE_C_COMPILER}
       CXX=${CMAKE_CXX_COMPILER}

env_windows =
       DISTUTILS_USE_SDK=1
       CC=${HIP_CLANG_PATH}/clang-cl
       CXX=${HIP_CLANG_PATH}/clang-cl

cmake_config=-DCMAKE_INSTALL_PREFIX=${ROCM_HOME} ${ROCK_BUILDER_APP_SRC_DIR}

cmd_exec_dir=${ROCK_BUILDER_APP_BUILD_DIR}
install_cmd = cd ${ROCM_HOME}/share/amd_smi
              pip install .
